/*! For license information please see 30.26827bf7.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[30],{2352:function(e,t,s){},2399:function(e,t,s){"use strict";s.r(t);var a=s(11),r=s(223),n=s(124),l=s.n(n),i=s(2380),o=s(59),c=s(163),d=s(0),p=s.n(d),h=s(7),u=s(2360),m=s(13);s(2352);class g extends p.a.PureComponent{constructor(e){super(e),this.currentUploadCanceller=void 0,this.componentDidUpdate=e=>{e.disabled!==this.props.disabled&&this.props.disabled&&this.reset()},this.dropHandler=(e,t,s)=>{const a=this.props.element.get("maxUploadSizeMb");if(t.length>0){const e="".concat(t[0].type," files are not allowed");return void this.setState({status:"ERROR",errorMessage:e})}const n=1024*a*1024;var i,o=Object(r.a)(e);try{for(o.s();!(i=o.n()).done;){if(i.value.size>n){const e="The max file size allowed is ".concat(a,"MB");return void this.setState({status:"ERROR",errorMessage:e})}}}catch(c){o.e(c)}finally{o.f()}this.setState({acceptedFiles:e,status:"UPLOADING"}),this.currentUploadCanceller=l.a.CancelToken.source(),this.props.uploadClient.uploadFiles(this.props.element.get("id"),e,void 0,this.currentUploadCanceller.token).then(()=>{this.currentUploadCanceller=void 0,this.setState({status:"UPLOADED"})}).catch(e=>{l.a.isCancel(e)?(this.currentUploadCanceller=void 0,this.setState({status:"UPLOADED"})):this.setState({status:"ERROR",errorMessage:e?e.toString():"Unknown error"})})},this.reset=()=>{this.setState({status:"READY",errorMessage:void 0,acceptedFiles:[]})},this.renderErrorMessage=()=>{const e=this.state.errorMessage;return p.a.createElement("div",{className:"uploadStatus uploadError"},p.a.createElement("span",{className:"body"},p.a.createElement(o.a,{className:"icon",type:"warning"})," ",e),p.a.createElement(h.Button,{color:"link",onClick:this.reset},"OK"))},this.renderUploadingMessage=()=>p.a.createElement("div",{className:"uploadStatus uploadProgress"},p.a.createElement("span",{className:"body"},p.a.createElement(u.a,{size:m.a["$file-uploader-spinner-size"],color:m.a.$secondary,overrides:{Svg:{style:{verticalAlign:"baseline",marginRight:"0.375rem"}}}}),p.a.createElement("span",null,"Uploading...")),p.a.createElement(h.Button,{color:"link",onClick:this.cancelCurrentUpload},"Cancel")),this.cancelCurrentUpload=()=>{null!=this.currentUploadCanceller&&(this.currentUploadCanceller.cancel(),this.currentUploadCanceller=void 0)},this.renderFileUploader=()=>{const e=this.state,t=e.status,s=e.errorMessage,r=this.props.element,n=r.get("type").toArray().map(e=>".".concat(e)),l=r.get("multipleFiles");let o=c.d,d="";return"UPLOADED"===t&&(o=Object(a.a)({},o),o.ContentMessage=Object(a.a)({},o.ContentMessage),o.ContentMessage.style=Object(a.a)({},o.ContentMessage.style),o.ContentMessage.style.visibility="hidden",o.ContentMessage.style.overflow="hidden",o.ContentMessage.style.height="0.625rem",o.ContentSeparator=Object(a.a)({},o.ContentSeparator),o.ContentSeparator.style.visibility="hidden",d=l?this.state.acceptedFiles.map(e=>e.name).join(", "):this.state.acceptedFiles[0].name),p.a.createElement(p.a.Fragment,null,"UPLOADED"===t&&p.a.createElement("div",{className:"uploadOverlay uploadDone"},p.a.createElement("span",{className:"body"},d)),p.a.createElement(i.a,{onDrop:this.dropHandler,errorMessage:s,accept:0===n.length?void 0:n,disabled:this.props.disabled,overrides:o,multiple:l}))},this.render=()=>{const e=this.state.status,t=this.props.element.get("label");let s;return s="ERROR"===e?this.renderErrorMessage:"UPLOADING"===e?this.renderUploadingMessage:this.renderFileUploader,p.a.createElement("div",{className:"Widget stFileUploader"},p.a.createElement("label",null,t),s())},this.state={status:"READY",errorMessage:void 0,acceptedFiles:[]}}}var E=g;s.d(t,"default",(function(){return E}))}}]);
//# sourceMappingURL=30.26827bf7.chunk.js.map